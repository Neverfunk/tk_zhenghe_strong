;-------------------------------------------------
;人質を要求する
;-------------------------------------------------
@DIPLOMACY_REQUEST_HOSTAGE(ARG:0)
#DIM FIRST_LINE
LOCAL:4 = GET_COUNTRY_BOSS(CFLAG:MASTER:所属)
LOCAL:5 = GET_COUNTRY_BOSS(ARG:0)

PRINTFORMW %ANAME(MASTER)%要求%ANAME(LOCAL:5)%交出一位人质

CALL DIPLOMACY_REQUEST_COMMON(ARG:0, 280)
LOCAL:2 = RESULT
SIF LOCAL:2 <= 0
	RETURN 0

DONE_DIPLOMACY_REQUEST:(ARG:0) = 1
FIRST_LINE = LINECOUNT

$SHOW_LOOP

CALL SINGLE_DRAWLINE
PRINTL 請选择要俘虏的角色
CALL SINGLE_DRAWLINE

CALL SELECT_CHARA_LIST_ONLY_LOGIC_SLG("REQUEST_PRISONER", "NONE")


SIF RESULT == -1
	RETURN 1

LOCAL:30 = RESULT
CALL SINGLE_DRAWLINE
CALL SHOW_INFO(LOCAL:30)
CALL SINGLE_DRAWLINE
PRINTL 要让这个角色成为我国的俘虏么？
CALL ASK_YN()
IF RESULT == 1
	CLEARLINE LINECOUNT - FIRST_LINE
	GOTO SHOW_LOOP
ENDIF

CALL CAPTURE(LOCAL:30, CFLAG:MASTER:所属)

;跳转信仰事件
TRYCALL SHOP_LIFE_USERSHOP68_REQUEST(CFLAG:MASTER:所属,ARG:0,2,LOCAL:30)

;快楽で言うことを聞かせた場合、ご褒美の処理
SIF LOCAL:2 == 2
	CALL DIPLOMACY_REQUEST_PRIZE(ARG:0)
;薬物で言うことを聞かせた場合、ドラッグの処理
SIF LOCAL:2 == 3
	CALL DIPLOMACY_REQUEST_DRUG(ARG:0)
;催眠で言うことを聞かせた場合、催眠の処理
SIF LOCAL:2 == 4
	CALL DIPLOMACY_REQUEST_HYPNOSIS(ARG:0)

RETURN 1

@SELECT_CHARA_LIST_SHOW_LOGIC_REQUEST_PRISONER(対象)
#DIM 対象
RETURN ((CFLAG:対象:所属 == DIPLOMACY_DIPLOMAT && CFLAG:対象:捕虜先 == 0) || (!GROUPMATCH(CFLAG:対象:所属, CFLAG:MASTER:所属, DIPLOMACY_DIPLOMAT) && CFLAG:対象:捕虜先 == DIPLOMACY_DIPLOMAT)) && 対象 != GET_COUNTRY_BOSS(CFLAG:対象:所属)　&& !IS_SP_CHARA(対象)
