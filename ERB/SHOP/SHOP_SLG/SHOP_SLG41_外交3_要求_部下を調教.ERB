;-------------------------------------------------
;部下を調教する
;-------------------------------------------------
@DIPLOMACY_REQUEST_TRAIN_BUKA(ARG:0)
#DIM FIRST_LINE
LOCAL:4 = GET_COUNTRY_BOSS(CFLAG:MASTER:所属)
LOCAL:5 = GET_COUNTRY_BOSS(ARG:0)

IF COUNTRY_EVENT_ID:(ARG:0) == SP_COUNTRY_ID:(特殊勢力_野盗)
	PRINTFORMW 因为是土匪所以直接被拒绝了
	RETURN 0
ENDIF

PRINTFORMW %ANAME(MASTER)%对%ANAME(LOCAL:5)%提出了想要调教对方部下的要求

CALL DIPLOMACY_REQUEST_COMMON(ARG:0, 250 + 20 * CFLAG:(LOCAL:5):外交調教カウンタ, 1)
LOCAL:2 = RESULT
SIF LOCAL:2 <= 0
	RETURN 0

DONE_DIPLOMACY_REQUEST:(ARG:0) = 1
FIRST_LINE = LINECOUNT

$SHOW_LOOP

CALL SINGLE_DRAWLINE
PRINTL 請选择要调教的角色
CALL SINGLE_DRAWLINE

CALL SELECT_CHARA_LIST_ONLY_LOGIC_SLG("TRAIN_BUKA", "NONE")

SIF RESULT == -1
	RETURN 1
LOCAL:30 = RESULT
CALL SINGLE_DRAWLINE
CALL SHOW_INFO(LOCAL:30)
CALL SINGLE_DRAWLINE
PRINTL 确定要调教这个角色么？
CALL ASK_YN()
IF RESULT == 1
	CLEARLINE LINECOUNT - FIRST_LINE
	GOTO SHOW_LOOP
ENDIF

SETCOLOR カラー_注意
PRINTFORML %ANAME(LOCAL:30)%可以在「捕虜の調教」项目内进行调教了
RESETCOLOR
PRINTFORMW (在条件满足的期限内总是可以进行调教)
CFLAG:(LOCAL:30):外交調教中 = 1
REDRAW 1
;快楽で言うことを聞かせた場合、ご褒美の処理
SIF LOCAL:2 == 2
	CALL DIPLOMACY_REQUEST_PRIZE(ARG:0)
;薬物で言うことを聞かせた場合、ドラッグの処理
SIF LOCAL:2 == 3
	CALL DIPLOMACY_REQUEST_DRUG(ARG:0)
;催眠で言うことを聞かせた場合、催眠の処理
SIF LOCAL:2 == 4
	CALL DIPLOMACY_REQUEST_HYPNOSIS(ARG:0)

RETURN 1


@SELECT_CHARA_LIST_SHOW_LOGIC_TRAIN_BUKA(対象)
#DIM 対象
RETURN CFLAG:対象:所属 == DIPLOMACY_DIPLOMAT && CFLAG:対象:捕虜先 == 0 && 対象 != GET_COUNTRY_BOSS(CFLAG:対象:所属)　&& !IS_SP_CHARA(対象)
