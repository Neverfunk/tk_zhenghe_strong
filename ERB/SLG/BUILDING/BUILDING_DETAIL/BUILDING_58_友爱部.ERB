@BUILDING_GET_NAME_友爱部()
    #FUNCTIONS
    RETURNF "友爱部"

@BUILDING_GET_EXP_友爱部()
    #FUNCTIONS
    RETURNF "回合末被捕获士官从属/依存提高。他国评判下降"

@BUILDING_SET_INFO_ID_58()
    BUILDING_TYPE:建造物_友爱部 = 建造物_类型_色情类
    BUILDING_LEVEL:建造物_友爱部 = 建造物_等级_二级建筑
    BUILDING_LIMIT_NUM:建造物_友爱部 = 建造物_数量限制_1
    BUILDING_LIMIT_UNI:建造物_友爱部 = 0
    BUILDING_COUNTRY_ID:建造物_友爱部:特殊勢力_普通势力 = 1
    BUILDING_COUNTRY_ID:建造物_友爱部:特殊勢力_野盗 = 1
    BUILDING_COUNTRY_ID:建造物_友爱部:特殊勢力_ホフゴブリン = 1
    BUILDING_COUNTRY_ID:建造物_友爱部:特殊勢力_外来人 = 1
    BUILDING_COUNTRY_ID:建造物_友爱部:特殊勢力_触手 = 1
    BUILDING_COUNTRY_ID:建造物_友爱部:特殊勢力_自警団 = 1
    BUILDING_COUNTRY_ID:建造物_友爱部:特殊勢力_サキュバス = 1
    BUILDING_COUNTRY_ID:建造物_友爱部:特殊勢力_狂信者 = 1
    BUILDING_HAVE_SKILL:建造物_友爱部 = 1
    BUILDING_TOHO_REQ_ID:建造物_友爱部:0 = 0

@CHECK_BUILDING_FUNCTION_友爱部(COUNTRY_ID)
    #FUNCTION
    #DIM COUNTRY_ID
    RESULT:1 = TMP_BUILDING_EXIST_FLAG:COUNTRY_ID:建造物_友爱部
    IF RESULT:1 > 0
        RESULT:0 = 1
    ENDIF
    RETURNF RESULT:0

@BUILDING_TEXT_友爱部_1(COUNTRY_ID)
    #FUNCTION
    #DIM COUNTRY_ID
    SIF !CHECK_BUILDING_TEXT_OUTPUT(COUNTRY_ID)
        RETURNF 0
    BUILDING_TEXT = PRINT_BUILDING_TEXT_TITLE_F(COLOR_色情建筑)
    PRINTFORM 因为《友爱部》的存在，
    PRINTFORML “最恐怖之物”和%ANAME(MASTER)%，必须选一个
    PRINTFORML %ANAME(GET_COUNTRY_BOSS(COUNTRY_ID))%势力大牢里的囚犯们对%ANAME(MASTER)%的从属度和依存度提高
    RETURNF 1

@BUILDING_TEXT_友爱部_2(COUNTRY_ID)
    #FUNCTION
    #DIM COUNTRY_ID
    SIF !CHECK_BUILDING_TEXT_OUTPUT(COUNTRY_ID)
        RETURNF 0
    BUILDING_TEXT = PRINT_BUILDING_TEXT_TITLE_F()
    PRINTFORM 听闻%ANAME(GET_COUNTRY_BOSS(COUNTRY_ID))%有《友爱部》的存在，
    PRINTFORML 其他势力对%ANAME(GET_COUNTRY_BOSS(COUNTRY_ID))%势力的评判下降了
    RETURNF 1

@BUILDING_SKILL_友爱部(COUNTRY_ID)
    #DIM COUNTRY_ID
    PRINTFORML 发动后选择一个在我方大牢中的角色，使其获得<隶属>,并失去所有反抗调教特质
    PRINTFORML 冷却时间1回合
    PRINTFORML 是否发动
    CALL ASK_YN()
    IF !RESULT
        PRINTFORML 发动了《友爱部》的技能
        CALL BUILDING_SKILL_友爱部_FUNCTION(COUNTRY_ID)
        IF RESULT
            BUILDING_SKILL_COLDTIME:COUNTRY_ID:建造物_友爱部 = 1
            PRINTFORMW 完毕
        ENDIF
    ENDIF


@BUILDING_SKILL_友爱部_FUNCTION(COUNTRY_ID)
    #DIM COUNTRY_ID
    #DIM CITY_ID
    SIF !IS_COUNTRY(COUNTRY_ID)
        RETURN
    CALL SINGLE_DRAWLINE
    PRINTFORML 请选择要获得隶属的被捕角色
    CALL SINGLE_DRAWLINE
    CALL SELECT_CHARA_LIST_ONLY_LOGIC_SEX("友爱部", "NONE", "DEFAULT")
    IF RESULT > 0
        CALL BUILDING_SKILL_友爱部_SETBIT(RESULT)
        RETURN 1
    ELSE
        RETURN 0
    ENDIF

@BUILDING_SKILL_友爱部_SETBIT(CHARA_ID)
    #DIM CHARA_ID
    SIF CHARA_ID < 0
        RETURN
    CFLAG:CHARA_ID:好感度 = 0
    CFLAG:CHARA_ID:依存度 = 3000
    CFLAG:CHARA_ID:従属度 = 10000
    CFLAG:CHARA_ID:支配度 = 0
    TALENT:CHARA_ID:恋慕 = 0
    TALENT:CHARA_ID:親愛 = 0
    TALENT:CHARA_ID:恋人 = 0
    TALENT:CHARA_ID:主人 = 0
    TALENT:CHARA_ID:所有者 = 0
    TALENT:CHARA_ID:服従 = 1
    TALENT:CHARA_ID:隷属 = 1
    TALENT:CHARA_ID:合意 = 1

    TALENT:CHARA_ID:坦率 = 1
    TALENT:CHARA_ID:胆怯 = 1
    TALENT:CHARA_ID:反抗的 = 0
    TALENT:CHARA_ID:堅強 = 0
    TALENT:CHARA_ID:傲慢 = 0
    TALENT:CHARA_ID:傲嬌 = 0

    TALENT:CHARA_ID:怕痛 = 1
    TALENT:CHARA_ID:怕痛 = 1
    TALENT:CHARA_ID:怕痛 = 1
    TALENT:CHARA_ID:怕痛 = 1
    TALENT:CHARA_ID:怕痛 = 1
    TALENT:CHARA_ID:怕痛 = 1
    TALENT:CHARA_ID:怕痛 = 1
    TALENT:CHARA_ID:怕痛 = 1
    TALENT:CHARA_ID:怕痛 = 1
    TALENT:CHARA_ID:怕痛 = 1

    TALENT:CHARA_ID:学習快 = 1
    TALENT:CHARA_ID:回復慢 = 1
    TALENT:CHARA_ID:孤高 = 0
    TALENT:CHARA_ID:反抗的 = 0
    TALENT:CHARA_ID:傲慢 = 0
    TALENT:CHARA_ID:自尊心高 = 0
    TALENT:CHARA_ID:自尊心低 = 1
    TALENT:CHARA_ID:好奇心 = 0
    TALENT:CHARA_ID:悲観的 = 1
    TALENT:CHARA_ID:冷漠 = 1
    TALENT:CHARA_ID:感情缺乏 = 1
    TALENT:CHARA_ID:難以越過的底線 = 1
    TALENT:CHARA_ID:圧抑 = 1
    TALENT:CHARA_ID:Ｓ気質 = 0
    TALENT:CHARA_ID:Ｍ気質 = 1
    TALENT:CHARA_ID:献身的 = 1

@SELECT_CHARA_LIST_SHOW_LOGIC_友爱部(CHARA_ID)
    #DIM CHARA_ID
    SIF CFLAG:CHARA_ID:行動不能状態 == 行動不能_子供
        RETURN 0
    SIF CFLAG:CHARA_ID:捕虜先 != CFLAG:MASTER:所属
        RETURN 0
    SIF GROUPMATCH(CFLAG:CHARA_ID:特殊状態, 1, 2)
        RETURN 0
    SIF CFLAG:CHARA_ID:特殊状態 == 0 && !IS_COUNTRY(CFLAG:CHARA_ID:所属)
        RETURN 0
    SIF IS_ANIMAL(CHARA_ID)
        RETURN 0
    RETURN 1
